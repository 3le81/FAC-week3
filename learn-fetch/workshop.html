<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learn Fetch & Promises</title>
</head>

<body>
  <h1>Open the console</h1>
  <script>

    // Challenges :
    // let pokemonFetched = fetch("https://pokeapi.co/api/v2/pokemon/pikachu");
    // // console.log(pokemonFetched);
    // pokemonFetched.then((result) => console.log(result));
    // let pokemonFetched = fetch()
    //   .then((response) => response.json())
    //   .then((body) => console.log(body))
    //   .catch((error) => console.log(error));

    // ---------------------------------------------------------------------------------------------------------

    // TASK 1 :
    //     Write a getUser function that takes a username argument
    // It should fetch that user’s profile from "https://api.github.com/users/USERNAME_HERE"
    // It should be callable like this:
    //    getUser("oliverjam")
    //   .then((user) => console.log(user))
    //   .catch((error) => console.log(error));


    let getUser = username => fetch(`https://api.github.com/users/${username}`).then((response) => response.json());
    getUser("oliverjam")
      .then((user) => console.log(user))
      .catch((error) => console.log(error));

    // -------------------------------------------------------------------------------------------------------------

    // TASK 2 :
    // Write a getRepos function that takes the Github user response object as an argument.
    // Fetch the a user using getUser, then use getRepos to fetch their repos using the repos_url property from the user object.
    // Log the array of repos.

    let getRepos = user => fetch(user.repos_url).then((response) => response.json());
    getUser("oliverjam")
      .then(getRepos)
      .then(console.log)
      .catch(console.error);

    // ----------------------------------------------------------------------------------------------------------------

    // TASK 3 OPTIONAL : 
    //     Fetch multiple GitHub profiles simultaneously using your getUser function above (you’ll have to call it more than once)
    // (You might want to read the docs for Promise.all at https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all )

    const oliverUser = getUser("oliverjam");
    const starsuitUser = getUser("starsuit");

    Promise.all([oliverUser, starsuitUser])
      .then(console.log)
      .catch(console.error);


  </script>
</body>

</html>